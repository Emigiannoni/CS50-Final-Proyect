{% extends "layout.html" %}

{% block title %}
    Playlist results
{% endblock %}

{% block main %}

    <main role="main" class="inner cover">
        
        <h1 style = "margin-bottom: 50px">Playlist:</h1>

        <img src="{{cover}}" width="300" height="300" style = "margin-bottom: 50px">

        <div class="container mt-3">
            <div id="accordion">
              <div class="card text-white bg-dark mb-3" style="width: 500px;">
                <div class="card-header">
                  <a class="btn" data-bs-toggle="collapse" href="#collapseOne">
                    <h2 style="color: whitesmoke;">Playlist Preview:</h2>
                  </a>
                </div>
                <div id="collapseOne" class="collapse show" data-bs-parent="#accordion">
                  <div class="card-body">
                    <iframe src={{src}} width="100%" height="380" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
                  </div>
                </div>
              </div>
              <div class="card text-white bg-dark mb-3" style="width: 500px;">
                <div class="card-header">
                  <a class="collapsed btn" data-bs-toggle="collapse" href="#collapseTwo">
                    <h2 style="color: whitesmoke;">Playlist tracks:</h2>
                  </a>
                </div>
                <div id="collapseTwo" class="collapse" data-bs-parent="#accordion">
                  <div class="card-body">
                    <table class="table table-responsive table-dark table-striped">
                        <thead>
                            <tr>
                                <th>Album</th>
                                <th>Track name</th>
                                <th>Main Artist</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for tracks in info %}
                            <tr>
                                <td><a href="{{tracks["track"]["album"]["external_urls"]["spotify"]}}"><img src="{{ tracks["track"]["album"]["images"][2]["url"] }}"></a></td>
                                <td>{{ tracks["track"]["name"] }}</td>
                                <td><a href="{{tracks["track"]["artists"][0]["external_urls"]["spotify"]}}">{{ tracks["track"]["artists"][0]["name"] }}</a></td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div class="card text-white bg-dark mb-3" style="width: 500px;">
                <div class="card-header">
                  <a class="collapsed btn" data-bs-toggle="collapse" href="#collapseThree">
                    <h2 style="color: whitesmoke;">Total duration:</h2>
                  </a>
                </div>
                <div id="collapseThree" class="collapse" data-bs-parent="#accordion">
                  <div class="card-body">                   
                        <h3> {{ time }} minutes. </h3>
                  </div>
                </div>
              </div>
              <div class="card text-white bg-dark mb-3" style="width: 500px;">
                <div class="card-header">
                  <a class="collapsed btn" data-bs-toggle="collapse" href="#collapseFour">
                    <h2 style="color: whitesmoke;">Number of songs over the years:</h2>
                  </a>
                </div>
                <div id="collapseFour" class="collapse" data-bs-parent="#accordion">
                  <div class="card-body"> 
                    <img src="static/barras_simple.png" width="480" height="360">
                  </div>
                </div>
              </div>
              <div class="card text-white bg-dark mb-3" style="width: 500px;">
                <div class="card-header">
                  <a class="collapsed btn" data-bs-toggle="collapse" href="#collapseFive">
                    <h2 style="color: whitesmoke;">Top10 artist's appearances:</h2>
                  </a>
                </div>
                <div id="collapseFive" class="collapse" data-bs-parent="#accordion">
                  <div class="card-body"> 
                    <table class="table table-responsive table-dark table-striped">
                      <thead>
                          <tr>
                              <th>Photo</th>
                              <th>Artist name</th>
                              <th>Appearances</th>
                          </tr>
                      </thead>
                      <tbody>
                      {% for register in artist_information %}
                          <tr>
                              <td><img src="{{ register["images"][2]["url"] }}"></td>
                              <td>{{ register["name"] }}</td>
                              <td>{{ register["apariciones"] }}</td>
                          </tr>
                      {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

    </main>

{% endblock %}